(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4966:function(e,s,a){Promise.resolve().then(a.bind(a,5230))},5230:function(e,s,a){"use strict";a.d(s,{default:function(){return i}});var t=a(7437),r=a(2265);function i(){let[e,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),[n,l]=(0,r.useState)([{role:"assistant",content:"Hi! I'm your AI purchase assistant. Tap the mic and tell me what you'd like to buy.",timestamp:new Date}]),[c,d]=(0,r.useState)(null),o=(0,r.useRef)(null),m=(0,r.useRef)([]),u=(0,r.useCallback)((e,s)=>{l(a=>[...a,{role:e,content:s,timestamp:new Date}])},[]),x=(0,r.useCallback)(async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),a=new MediaRecorder(e,{mimeType:"audio/webm"});o.current=a,m.current=[],a.ondataavailable=e=>{m.current.push(e.data)},a.onstop=async()=>{let s=new Blob(m.current,{type:"audio/webm"});e.getTracks().forEach(e=>e.stop()),await h(s)},a.start(),s(!0)}catch(e){console.error("Failed to start recording:",e),u("system","Failed to access microphone. Please check permissions.")}},[u]),p=(0,r.useCallback)(()=>{o.current&&e&&(o.current.stop(),s(!1))},[e]),h=async e=>{i(!0),u("user","\uD83C\uDFA4 [Voice command...]");try{let s=new FormData;s.append("audio",e,"recording.webm"),s.append("user_id","demo_user");let a=await fetch("/api/v1/voice",{method:"POST",body:s}),t=await a.json();t.success?(d({order_id:t.order_id,total_price:t.total_price,platform:t.platform,estimated_ready:t.estimated_ready}),u("assistant",t.message)):u("assistant",t.message||"Sorry, I could not process that request.")}catch(e){console.error("Error processing audio:",e),u("assistant","Sorry, there was an error processing your request. Try the text input instead.")}finally{i(!1)}},y=async e=>{if(e.trim()){u("user",e),i(!0);try{let s=await fetch("/api/v1/command",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,user_id:"demo_user"})}),a=await s.json();a.success&&a.order_id&&d({order_id:a.order_id,total_price:a.total_price,platform:a.platform,estimated_ready:a.estimated_ready}),u("assistant",a.message)}catch(e){console.error("Error sending command:",e),u("assistant","Sorry, there was an error. Please try again.")}finally{i(!1)}}},[f,g]=(0,r.useState)("");return(0,t.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,t.jsx)("header",{className:"glass border-b border-white/10 p-4",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-xl",children:"\uD83D\uDED2"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"font-bold text-lg",children:"AgentBuy"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Voice AI Purchase Agent"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Online"})]})]})}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto p-4 max-w-4xl mx-auto w-full",children:(0,t.jsxs)("div",{className:"space-y-4",children:[n.map((e,s)=>(0,t.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,t.jsx)("div",{className:"max-w-[80%] rounded-2xl px-4 py-3 ".concat("user"===e.role?"bg-gradient-to-br from-primary to-secondary text-white":"system"===e.role?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30":"glass text-white"),children:(0,t.jsx)("p",{className:"text-sm leading-relaxed",children:e.content})})},s)),c&&(0,t.jsxs)("div",{className:"glass rounded-2xl p-4 border border-green-500/30 bg-green-500/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)("span",{className:"text-green-400 text-lg",children:"✓"}),(0,t.jsx)("span",{className:"font-semibold text-green-400",children:"Order Confirmed"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-400",children:"Platform"}),(0,t.jsx)("p",{className:"font-medium capitalize",children:c.platform})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-400",children:"Total"}),(0,t.jsxs)("p",{className:"font-medium",children:["$",c.total_price.toFixed(2)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-400",children:"Order ID"}),(0,t.jsx)("p",{className:"font-mono text-xs",children:c.order_id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-400",children:"Ready by"}),(0,t.jsx)("p",{className:"font-medium",children:new Date(c.estimated_ready).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]}),a&&(0,t.jsx)("div",{className:"flex justify-start",children:(0,t.jsxs)("div",{className:"glass rounded-2xl px-4 py-3 flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-primary rounded-full animate-bounce"}),(0,t.jsx)("span",{className:"w-2 h-2 bg-primary rounded-full animate-bounce [animation-delay:0.1s]"}),(0,t.jsx)("span",{className:"w-2 h-2 bg-primary rounded-full animate-bounce [animation-delay:0.2s]"})]}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Processing..."})]})})]})}),(0,t.jsx)("footer",{className:"glass border-t border-white/10 p-4",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,t.jsxs)("button",{onClick:e?p:x,disabled:a,className:"relative w-20 h-20 rounded-full flex items-center justify-center transition-all ".concat(e?"bg-red-500 scale-110":"bg-gradient-to-br from-primary to-secondary hover:scale-105"," ").concat(a?"opacity-50 cursor-not-allowed":""),children:[e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"absolute inset-0 rounded-full bg-red-500 animate-ping opacity-20"}),(0,t.jsx)("span",{className:"absolute inset-0 rounded-full bg-red-500 animate-pulse opacity-40"})]}),(0,t.jsx)("span",{className:"text-3xl z-10",children:e?"⏹":"\uD83C\uDFA4"})]})}),e&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-4",children:[[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"w-1 bg-red-400 rounded-full voice-wave",style:{animationDelay:"".concat(.1*s,"s")}},s)),(0,t.jsx)("span",{className:"ml-2 text-sm text-red-400",children:"Listening..."})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y(f),g("")},className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:f,onChange:e=>g(e.target.value),placeholder:"Or type your request...",disabled:a,className:"flex-1 bg-surface rounded-xl px-4 py-3 text-sm border border-white/10 focus:outline-none focus:border-primary transition-colors"}),(0,t.jsx)("button",{type:"submit",disabled:a||!f.trim(),className:"px-6 py-3 bg-gradient-to-r from-primary to-secondary rounded-xl font-medium text-sm hover:opacity-90 transition-opacity disabled:opacity-50",children:"Send"})]}),(0,t.jsx)("p",{className:"text-center text-xs text-gray-500 mt-3",children:'Try: "Buy me a grande latte from Starbucks"'})]})})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=4966)}),_N_E=e.O()}]);